<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WELCOME TO UNICORNIO WEBSITE!</title>

    <!-- Solana Web3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/solana-web3.js/1.73.0/solana-web3.min.js"></script>
    <!-- Wallet Adapter -->
    <script src="https://unpkg.com/@solana/wallet-adapter-base"></script>
    <script src="https://unpkg.com/@solana/wallet-adapter-wallets"></script>

    <!-- Inline Styles for the retro feel -->
    <style>
        body {
            background-color: #800080;
            color: #160016;
            font-family: "Comic Sans MS", cursive, sans-serif;
        }

        h1 {
            text-align: center;
            color: #160016;
            text-shadow: 2px 2px 4px #000000;
        }

        h2 {
            color: #FF4500;
        }

        a {
            color: #FF1493;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .blink {
            animation: blink-animation 1s steps(5, start) infinite;
            -webkit-animation: blink-animation 1s steps(5, start) infinite;
        }

        @keyframes blink-animation {
            to {
                visibility: hidden;
            }
        }

        marquee {
            font-size: 20px;
            color: #32CD32;
        }

        .content {
            text-align: center;
        }

        .button {
            background-color: #FFA500;
            border: 2px solid #000000;
            color: #000000;
            padding: 10px 20px;
            text-align: center;
            display: inline-block;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 2px;
            cursor: pointer;
            box-shadow: 3px 3px 5px #888888;
        }

        .retro-table {
            width: 80%;
            margin: auto;
            border: 3px solid #0000FF;
            border-collapse: collapse;
        }

        .retro-table th,
        .retro-table td {
            border: 1px solid #0000FF;
            padding: 10px;
            text-align: center;
            background-color: #FFD700;
        }

        #wallet-container {
            margin: 20px 0;
            padding: 10px;
            background-color: #FFD700;
            border: 2px solid #0000FF;
            text-align: center;
        }

        #nft-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        .nft-card {
            width: 200px;
            margin: 10px;
            padding: 10px;
            background-color: #FFD700;
            border: 2px solid #0000FF;
            text-align: center;
        }

        .nft-image {
            width: 150px;
            height: 150px;
            object-fit: cover;
        }

        #error-message {
            color: #FF0000;
            font-weight: bold;
            margin-top: 10px;
        }

        #loading {
            display: none;
            color: #0000FF;
            font-weight: bold;
            margin-top: 10px;
        }

        #debug-log {
            background-color: #000000;
            color: #00FF00;
            padding: 10px;
            margin-top: 20px;
            font-family: monospace;
            text-align: left;
            height: 200px;
            overflow-y: auto;
        }
    </style>
</head>

<body>

    <!-- Title -->
    <h1>WELCOME TO UNICORNIO WEBSITE!</h1>

    <!-- Scrolling marquee -->
    <marquee>Welcome! This website is under construction!</marquee>

    <!-- Hit counter (fake for now) -->
    <p style="text-align: center;"><img src="https://www.reliablecounter.com/count.php?page=yourpagehere.com&digit=style/plain/5/&reloads=0" alt="hit counter"></p>

    <!-- Wallet Connection -->
    <div id="wallet-container">
        <button id="connect-wallet" class="button">Connect Wallet</button>
        <p id="wallet-status"></p>
        <p id="loading">Loading...</p>
        <p id="error-message"></p>
    </div>

    <!-- NFT Display -->
    <div id="nft-container"></div>

    <!-- Content -->
    <div class="content">
        <h2><span class="blink">Check out my cool stuff!</span></h2>

        <p>EVERY 11 YEAR CREDIT CYCLE A FEW UNICORNS ARE MADE WHICH PRODUCE ALL YIELD FOR THAT CYCLE. FIND THIS DECADE'S UNICORN.</p>

        <!-- Buttons -->
        <a href="https://www.unicorn.meme/" class="button">UwU</a>
        <a href="https://unicornio.meme/" class="button">Unicornio Memeio</a>

        <!-- Retro Table -->
        <table class="retro-table">
            <tr>
                <th>Item</th>
                <th>Description</th>
            </tr>
            <tr>
                <td>Gif 1</td>
                <td>Dancing Baby</td>
            </tr>
            <tr>
                <td>Gif 2</td>
                <td>Flaming Text</td>
            </tr>
        </table>

        <p>Sign my guestbook below!</p>
        <form action="guestbook.html" method="post">
            Name: <input type="text" name="name"><br><br>
            Message: <textarea name="message" rows="4" cols="50"></textarea><br><br>
            <input type="submit" value="Sign Guestbook">
        </form>
    </div>

    <!-- More animated gifs -->
    <img src="https://www.unicorn.meme/img/sidebar/28.webp" alt="Retro GIF">
    <img src="https://media.tenor.com/CiV0bZA9R2MAAAAi/spinning-turning.gif">

    <!-- Debug Log -->
    <div id="debug-log"></div>

    <script>
        const connectButton = document.getElementById('connect-wallet');
        const walletStatus = document.getElementById('wallet-status');
        const nftContainer = document.getElementById('nft-container');
        const errorMessage = document.getElementById('error-message');
        const loading = document.getElementById('loading');
        const debugLog = document.getElementById('debug-log');

        // Replace with your actual collection address
        const COLLECTION_ADDRESS = 'YOUR_COLLECTION_ADDRESS_HERE';

        let wallet = null;

        function log(message) {
            console.log(message);
            debugLog.innerHTML += message + '<br>';
            debugLog.scrollTop = debugLog.scrollHeight;
        }

        window.onload = function () {
            log('Page loaded successfully.');
        };

        connectButton.addEventListener('click', async () => {
            if (!wallet) {
                try {
                    loading.style.display = 'block';
                    errorMessage.textContent = '';
                    log('Attempting to connect wallet...');

                    // Check if Phantom wallet is installed
                    const provider = window?.solana;
                    if (!provider) {
                        throw new Error("Phantom wallet not found. Please install it and try again.");
                    }

                    await provider.connect();
                    wallet = provider;
                    connectButton.textContent = 'Disconnect Wallet';
                    walletStatus.textContent = `Connected: ${wallet.publicKey.toString()}`;
                    log('Wallet connected successfully.');
                    fetchNFTs();
                } catch (err) {
                    console.error('Failed to connect wallet:', err);
                    errorMessage.textContent = `Failed to connect wallet: ${err.message}`;
                    log(`Error connecting wallet: ${err.message}`);
                } finally {
                    loading.style.display = 'none';
                }
            } else {
                wallet = null;
                connectButton.textContent = 'Connect Wallet';
                walletStatus.textContent = 'Disconnected';
                nftContainer.innerHTML = '';
                errorMessage.textContent = '';
                log('Wallet disconnected.');
            }
        });

        async function fetchNFTs() {
            try {
                loading.style.display = 'block';
                errorMessage.textContent = '';
                log('Fetching NFTs...');

                const connection = new solanaWeb3.Connection('https://api.mainnet-beta.solana.com', 'confirmed');
                log('Connected to Solana network.');

                const nftsResponse = await connection.getParsedTokenAccountsByOwner(
                    wallet.publicKey,
                    { programId: new solanaWeb3.PublicKey('TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA') }
                );
                log(`Fetched ${nftsResponse.value.length} token accounts.`);

                const nfts = nftsResponse.value.filter(accountInfo =>
                    accountInfo.account.data.parsed.info.mint === COLLECTION_ADDRESS &&
                    accountInfo